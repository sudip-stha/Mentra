{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FYP/mentra/actions/cover-letter.js"],"sourcesContent":["\"use server\";\r\n\r\nimport { db } from \"@/lib/prisma\";\r\nimport { auth } from \"@clerk/nextjs/server\";\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\n\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);\r\nconst model = genAI.getGenerativeModel({ model: \"gemini-2.5-flash\" });\r\n\r\nexport async function generateCoverLetter(data) {\r\n  const { userId } = await auth();\r\n  if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n  const user = await db.user.findUnique({\r\n    where: { clerkUserId: userId },\r\n  });\r\n\r\n  if (!user) throw new Error(\"User not found\");\r\n\r\n  const prompt = `\r\n    Write a professional cover letter for a ${data.jobTitle} position at ${\r\n    data.companyName\r\n  }.\r\n    \r\n    About the candidate:\r\n    - Industry: ${user.industry}\r\n    - Years of Experience: ${user.experience}\r\n    - Skills: ${user.skills?.join(\", \")}\r\n    - Professional Background: ${user.bio}\r\n    \r\n    Job Description:\r\n    ${data.jobDescription}\r\n    \r\n    Requirements:\r\n    1. Use a professional, enthusiastic tone\r\n    2. Highlight relevant skills and experience\r\n    3. Show understanding of the company's needs\r\n    4. Keep it concise (max 400 words)\r\n    5. Use proper business letter formatting in markdown\r\n    6. Include specific examples of achievements\r\n    7. Relate candidate's background to job requirements\r\n    \r\n    Format the letter in markdown.\r\n  `;\r\n\r\n  try {\r\n    const result = await model.generateContent(prompt);\r\n    const content = result.response.text().trim();\r\n\r\n    const coverLetter = await db.coverLetter.create({\r\n      data: {\r\n        content,\r\n        jobDescription: data.jobDescription,\r\n        companyName: data.companyName,\r\n        jobTitle: data.jobTitle,\r\n        status: \"completed\",\r\n        userId: user.id,\r\n      },\r\n    });\r\n\r\n    return coverLetter;\r\n  } catch (error) {\r\n    console.error(\"Error generating cover letter:\", error.message);\r\n    throw new Error(\"Failed to generate cover letter\");\r\n  }\r\n}\r\n\r\nexport async function getCoverLetters() {\r\n  const { userId } = await auth();\r\n  if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n  const user = await db.user.findUnique({\r\n    where: { clerkUserId: userId },\r\n  });\r\n\r\n  if (!user) throw new Error(\"User not found\");\r\n\r\n  return await db.coverLetter.findMany({\r\n    where: {\r\n      userId: user.id,\r\n    },\r\n    orderBy: {\r\n      createdAt: \"desc\",\r\n    },\r\n  });\r\n}\r\n\r\nexport async function getCoverLetter(id) {\r\n  const { userId } = await auth();\r\n  if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n  const user = await db.user.findUnique({\r\n    where: { clerkUserId: userId },\r\n  });\r\n\r\n  if (!user) throw new Error(\"User not found\");\r\n\r\n  return await db.coverLetter.findUnique({\r\n    where: {\r\n      id,\r\n      userId: user.id,\r\n    },\r\n  });\r\n}\r\n\r\nexport async function deleteCoverLetter(id) {\r\n  const { userId } = await auth();\r\n  if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n  const user = await db.user.findUnique({\r\n    where: { clerkUserId: userId },\r\n  });\r\n\r\n  if (!user) throw new Error(\"User not found\");\r\n\r\n  return await db.coverLetter.delete({\r\n    where: {\r\n      id,\r\n      userId: user.id,\r\n    },\r\n  });\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FYP/mentra/app/%28main%29/ai-cover-letter/_components/cover-letter-list.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/(main)/ai-cover-letter/_components/cover-letter-list.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(main)/ai-cover-letter/_components/cover-letter-list.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAgU,GAC7V,8FACA"}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FYP/mentra/app/%28main%29/ai-cover-letter/_components/cover-letter-list.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/(main)/ai-cover-letter/_components/cover-letter-list.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(main)/ai-cover-letter/_components/cover-letter-list.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA4S,GACzU,0EACA"}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FYP/mentra/components/nav.jsx"],"sourcesContent":["import {\r\n  PenBox,\r\n  LayoutDashboard,\r\n  FileText,\r\n  GraduationCap,\r\n} from \"lucide-react\";\r\nimport { SignedIn } from \"@clerk/nextjs\";\r\nimport Link from \"next/link\";\r\n\r\nconst NavBar = () => {\r\n  return (\r\n    <div>\r\n       <div className=\"flex items-center justify-center gap-8 flex-col md:flex-row text-2xl\">\r\n        <SignedIn>\r\n          <Link href=\"/dashboard\" className=\"flex items-center gap-2\">\r\n              <LayoutDashboard className=\"h-4 w-4\" />\r\n              Industry Insights\r\n          </Link>\r\n\r\n          <Link href=\"/resume\" className=\"flex items-center gap-2\">\r\n            <FileText className=\"h-4 w-4\" />\r\n            Build Resume\r\n          </Link>\r\n\r\n          <Link href=\"/ai-cover-letter\" className=\"flex items-center gap-2\">\r\n            <PenBox className=\"h-4 w-4\" />\r\n            Cover Letter\r\n          </Link>\r\n\r\n          <Link href=\"/interview\" className=\"flex items-center gap-2\">\r\n            <GraduationCap className=\"h-4 w-4\" />\r\n            Interview Prep\r\n          </Link>\r\n        </SignedIn>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NavBar\r\n"],"names":[],"mappings":";;;;AAOA;AADA;AANA;AAAA;AAAA;AAAA;;;;;AASA,MAAM,SAAS;IACb,qBACE,8OAAC;kBACE,cAAA,8OAAC;YAAI,WAAU;sBACd,cAAA,8OAAC,yKAAA,CAAA,WAAQ;;kCACP,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAa,WAAU;;0CAC9B,8OAAC,4NAAA,CAAA,kBAAe;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAI3C,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAU,WAAU;;0CAC7B,8OAAC,8MAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAIlC,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAmB,WAAU;;0CACtC,8OAAC,6MAAA,CAAA,SAAM;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAIhC,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAa,WAAU;;0CAChC,8OAAC,wNAAA,CAAA,gBAAa;gCAAC,WAAU;;;;;;4BAAY;;;;;;;;;;;;;;;;;;;;;;;AAOjD;uCAEe"}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 300, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FYP/mentra/app/%28main%29/ai-cover-letter/page.jsx"],"sourcesContent":["import { getCoverLetters } from \"@/actions/cover-letter\";\r\nimport Link from \"next/link\";\r\nimport { Plus } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport CoverLetterList from \"./_components/cover-letter-list\";\r\nimport NavBar from \"@/components/nav\";\r\n\r\nexport default async function CoverLetterPage() {\r\n  const coverLetters = await getCoverLetters();\r\n\r\n  return (\r\n    <div>\r\n      <NavBar />\r\n      <div className=\"flex flex-col md:flex-row gap-2 items-center justify-between mb-5\">\r\n        <h1 className=\"text-6xl font-bold gradient-title\">My Cover Letters</h1>\r\n        <Link href=\"/ai-cover-letter/new\">\r\n          <Button>\r\n            <Plus className=\"h-4 w-4 mr-2\" />\r\n            Create New\r\n          </Button>\r\n        </Link>\r\n      </div>\r\n\r\n      <CoverLetterList coverLetters={coverLetters} />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;AACA;AACA;AAHA;;;;;;;;AAKe,eAAe;IAC5B,MAAM,eAAe,MAAM,CAAA,GAAA,0HAAA,CAAA,kBAAe,AAAD;IAEzC,qBACE,8OAAC;;0BACC,8OAAC,kHAAA,CAAA,UAAM;;;;;0BACP,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAClD,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;kCACT,cAAA,8OAAC,2HAAA,CAAA,SAAM;;8CACL,8OAAC,kMAAA,CAAA,OAAI;oCAAC,WAAU;;;;;;gCAAiB;;;;;;;;;;;;;;;;;;0BAMvC,8OAAC,mLAAA,CAAA,UAAe;gBAAC,cAAc;;;;;;;;;;;;AAGrC"}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}