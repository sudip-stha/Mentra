{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FYP/mentra/actions/resume.js"],"sourcesContent":["\"use server\";\r\n\r\nimport { db } from \"@/lib/prisma\";\r\nimport { auth } from \"@clerk/nextjs/server\";\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);\r\nconst model = genAI.getGenerativeModel({ model: \"gemini-2.5-flash-lite\" });\r\n\r\nexport async function saveResume(content) {\r\n  const { userId } = await auth();\r\n  if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n  const user = await db.user.findUnique({\r\n    where: { clerkUserId: userId },\r\n  });\r\n\r\n  if (!user) throw new Error(\"User not found\");\r\n\r\n  try {\r\n    const resume = await db.resume.upsert({\r\n      where: {\r\n        userId: user.id,\r\n      },\r\n      update: {\r\n        content,\r\n      },\r\n      create: {\r\n        userId: user.id,\r\n        content,\r\n      },\r\n    });\r\n\r\n    revalidatePath(\"/resume\");\r\n    return resume;\r\n  } catch (error) {\r\n    console.error(\"Error saving resume:\", error);\r\n    throw new Error(\"Failed to save resume\");\r\n  }\r\n}\r\n\r\nexport async function getResume() {\r\n  const { userId } = await auth();\r\n  if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n  const user = await db.user.findUnique({\r\n    where: { clerkUserId: userId },\r\n  });\r\n\r\n  if (!user) throw new Error(\"User not found\");\r\n\r\n  return await db.resume.findUnique({\r\n    where: {\r\n      userId: user.id,\r\n    },\r\n  });\r\n}\r\n\r\nexport async function improveWithAI({ current, type }) {\r\n  const { userId } = await auth();\r\n  if (!userId) throw new Error(\"Unauthorized\");\r\n\r\n  const user = await db.user.findUnique({\r\n    where: { clerkUserId: userId },\r\n    include: {\r\n      industryInsight: true,\r\n    },\r\n  });\r\n\r\n  if (!user) throw new Error(\"User not found\");\r\n\r\n  const prompt = `\r\n    As an expert resume writer, improve the following ${type} description for a ${user.industry} professional.\r\n    Make it more impactful, quantifiable, and aligned with industry standards.\r\n    Current content: \"${current}\"\r\n\r\n    Requirements:\r\n    1. Use action verbs\r\n    2. Include metrics and results where possible\r\n    3. Highlight relevant technical skills\r\n    4. Keep it concise but detailed\r\n    5. Focus on achievements over responsibilities\r\n    6. Use industry-specific keywords\r\n    \r\n    Format the response as a single paragraph without any additional text or explanations.\r\n  `;\r\n\r\n  try {\r\n    const result = await model.generateContent(prompt);\r\n    const response = result.response;\r\n    const improvedContent = response.text().trim();\r\n    return improvedContent;\r\n  } catch (error) {\r\n    console.error(\"Error improving content:\", error);\r\n    throw new Error(\"Failed to improve content\");\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;AACA;;AAFA;;;;;;;AAIA,MAAM,QAAQ,IAAI,8JAAA,CAAA,qBAAkB,CAAC,QAAQ,GAAG,CAAC,cAAc;AAC/D,MAAM,QAAQ,MAAM,kBAAkB,CAAC;IAAE,OAAO;AAAwB;AAEjE,eAAe,uCAAQ,GAAR,WAAW,OAAO;IACtC,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAC5B,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;IAE7B,MAAM,OAAO,MAAM,6GAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QACpC,OAAO;YAAE,aAAa;QAAO;IAC/B;IAEA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,IAAI;QACF,MAAM,SAAS,MAAM,6GAAA,CAAA,KAAE,CAAC,MAAM,CAAC,MAAM,CAAC;YACpC,OAAO;gBACL,QAAQ,KAAK,EAAE;YACjB;YACA,QAAQ;gBACN;YACF;YACA,QAAQ;gBACN,QAAQ,KAAK,EAAE;gBACf;YACF;QACF;QAEA,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;QACf,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,eAAe,uCAAO,GAAP;IACpB,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAC5B,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;IAE7B,MAAM,OAAO,MAAM,6GAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QACpC,OAAO;YAAE,aAAa;QAAO;IAC/B;IAEA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,OAAO,MAAM,6GAAA,CAAA,KAAE,CAAC,MAAM,CAAC,UAAU,CAAC;QAChC,OAAO;YACL,QAAQ,KAAK,EAAE;QACjB;IACF;AACF;AAEO,eAAe,uCAAW,GAAX,cAAc,EAAE,OAAO,EAAE,IAAI,EAAE;IACnD,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAC5B,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;IAE7B,MAAM,OAAO,MAAM,6GAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QACpC,OAAO;YAAE,aAAa;QAAO;QAC7B,SAAS;YACP,iBAAiB;QACnB;IACF;IAEA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,SAAS,CAAC;sDACoC,EAAE,KAAK,mBAAmB,EAAE,KAAK,QAAQ,CAAC;;sBAE1E,EAAE,QAAQ;;;;;;;;;;;EAW9B,CAAC;IAED,IAAI;QACF,MAAM,SAAS,MAAM,MAAM,eAAe,CAAC;QAC3C,MAAM,WAAW,OAAO,QAAQ;QAChC,MAAM,kBAAkB,SAAS,IAAI,GAAG,IAAI;QAC5C,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,MAAM,IAAI,MAAM;IAClB;AACF;;;IAvFsB;IAgCA;IAiBA;;AAjDA,+OAAA;AAgCA,+OAAA;AAiBA,+OAAA"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FYP/mentra/app/%28main%29/resume/_components/resume-builder.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/(main)/resume/_components/resume-builder.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(main)/resume/_components/resume-builder.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAoT,GACjV,kFACA"}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FYP/mentra/app/%28main%29/resume/_components/resume-builder.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/(main)/resume/_components/resume-builder.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(main)/resume/_components/resume-builder.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAgS,GAC7T,8DACA"}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FYP/mentra/app/%28main%29/resume/page.jsx"],"sourcesContent":["import { getResume } from \"@/actions/resume\";\r\nimport ResumeBuilder from \"./_components/resume-builder\";\r\n\r\nexport default async function ResumePage() {\r\n  const resume = await getResume();\r\n\r\n  return (\r\n    <div className=\"container mx-auto py-6\">\r\n      <ResumeBuilder initialContent={resume?.content} />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAEe,eAAe;IAC5B,MAAM,SAAS,MAAM,CAAA,GAAA,iHAAA,CAAA,YAAS,AAAD;IAE7B,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,8JAAA,CAAA,UAAa;YAAC,gBAAgB,QAAQ;;;;;;;;;;;AAG7C"}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}